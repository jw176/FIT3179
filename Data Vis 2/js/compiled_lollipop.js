const spec_compiled = {
    $schema: "https://vega.github.io/schema/vega-lite/v5.json",
    description: "A simple bar chart with embedded data.",
    width: 700,
    title: {
        text: ["What languages do developers want to use?"],
        color: "white",
        fontSize: 20,
        subtitlePadding: 20,
        subtitle: [
            "Ratio of how many developers want to work",
            "with a language vs how many already have",
            "",
        ],
        subtitleColor: "grey",
        subtitleFontSize: 16,
    },
    data: {
        values: [
            { name: "F#", value: 2.8299418604651163 },
            { name: "Solidity", value: 2.68659793814433 },
            { name: "Rust", value: 2.6714018108023727 },
            { name: "Elixir", value: 2.2527397260273974 },
            { name: "Julia", value: 2.162609542356378 },
            { name: "Erlang", value: 2.057142857142857 },
            { name: "Go", value: 2.047556142668428 },
            { name: "Haskell", value: 1.9493087557603688 },
            { name: "Clojure", value: 1.8706563706563706 },
            { name: "OCaml", value: 1.8383084577114426 },
            { name: "Crystal", value: 1.6612377850162867 },
            { name: "Swift", value: 1.5531393568147014 },
            { name: "Kotlin", value: 1.5140581830001625 },
            { name: "Scala", value: 1.4013722126929673 },
            { name: "Dart", value: 1.3691199639882963 },
            { name: "SAS", value: 0.9742268041237113 },
            { name: "C#", value: 0.8401735962280327 },
            { name: "COBOL", value: 0.8337349397590361 },
            { name: "C++", value: 0.7882844079252534 },
            { name: "Delphi", value: 0.7653014265991717 },
            { name: "Fortran", value: 0.739057239057239 },
            { name: "C", value: 0.6084733947796452 },
            { name: "Java", value: 0.5981622590766472 },
            { name: "Objective-C", value: 0.5561192136968928 },
            { name: "Groovy", value: 0.4688065099457505 },
            { name: "VBA", value: 0.31362555215766225 },
        ],
    },
    encoding: {
        x: {
            field: "name",
            type: "nominal",
            sort: null,
            axis: {
                title: ["Programming Language"],
                titleAngle: 0,
                titlePadding: 20,
                titleFontSize: 14,
                titleColor: "grey",
                labelAngle: -45,
                labelFontSize: 12,
            },
        },
        y: {
            field: "value",
            type: "quantitative",
            axis: {
                title: ["Number of developers"],
                // titleAngle: 0,
                // titleAlign: "right",
                titlePadding: 20,
                titleFontSize: 14,
                titleColor: "grey",
            },
        },
        tooltip: [
            { field: "name", title: "Programming Language" },
            {
                field: "value",
                title: "Number of developers",
                format: ".2f",
            },
        ],
        color: {
            condition: { test: "datum['value'] < 1.0", value: "#fc4225" },
            value: "#93E1D8",
        },
        stroke: {
            condition: { test: "datum['value'] < 1.0", value: "#fc4225" },
            value: "#93E1D8",
        },  
    },
    layer: [
        { mark: { type: "bar", width: 2, color: "#93E1D8" } },
        {
            mark: {
                type: "point",
                size: 100,
                fill: "#030b1c",
                stroke: "#93E1D8",
                opacity: 1,
            },
        },
    ],
    config: {
        background: "transparent",
        font: "mononoki",
        view: { stroke: "transparent" },
        title: { color: "#fff", subtitleColor: "#fff" },
        style: {
            "guide-label": { fill: "#fff" },
            "guide-title": { fill: "#fff" },
        },
        axis: { domainColor: "#fff", gridColor: "#888", tickColor: "#fff" },
        axis: {
            domainWidth: 0.5,
            grid: true,
            labelPadding: 2,
            tickSize: 5,
            tickWidth: 0.5,
            titleFontWeight: "normal",
        },
        axisBand: { grid: false },
        axisX: { gridWidth: 0.1 },
        axisY: { gridWidth: 0.1 },
        legend: { labelFontSize: 11, padding: 1, symbolType: "square" },
        range: {
            category: [
                "#25fcf8",
                "#25fc50",
                "#b1fc25",
                "#fcbc25",
                "#fc4225",
                "#fc25d5",
                "#b762fc",
                "#536ffc",
            ],
        },
    },
};
vegaEmbed("#compiled_lollipop_vis", spec_compiled, { mode: "vega-lite" })
    .then(console.log)
    .catch(console.warn);
